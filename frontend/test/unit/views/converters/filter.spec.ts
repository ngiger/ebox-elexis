
import {FilterValueConverter} from "../../../../src/views/common/converters/filter";


describe('the filter value converter', () => {

    var converter: FilterValueConverter;

    beforeEach(() => {

        converter = new FilterValueConverter();

    });

    it('all items to be displayed', () => {

        var item1 = {"name": "test", "address": {"street": "Hauptstrasse"}};
        var item2 = {"name": "fake", "address": {"street": "Amselweg"}};
        var item3 = {"name": "system", "address": {"street": "Finkenweg"}};
        var item4 = { "address": {"street": "Drosselweg"}};
        var item5 = {"name": "else", "array":["bird", "horse", "cat", "dog"]};

        var items = [{"id":"addef970c6e9359a10210","identifier":["addef970c6e9359a10210"],"dateWritten":1469613466000,"medicationCodeableConcept":{"codings":[{"system":"urn:oid:2.16.840.1.113883.6.73‎","code":"A10BX07"}],"text":"VICTOZA 6 mg/ml 2 3 ml Inj lös"},"dosageInstructions":[{"text":"2-1-1-0"}]},{"id":"Cf45de2f4d30e500d032","identifier":["Cf45de2f4d30e500d032"],"dateWritten":1469695257000,"medicationCodeableConcept":{"codings":[{"system":"urn:oid:2.16.840.1.113883.6.73‎","code":"M01AB05"}],"text":"DICLOFENAC actavis 25 mg Filmtabl"},"dosageInstructions":[{"text":"1-0-1-1"}]},{"id":"Dbffca2007fbdbda0081","identifier":["Dbffca2007fbdbda0081"],"dateWritten":1469613022000,"dateEnded":1469613022000,"note":"Vor dem Essen","medicationCodeableConcept":{"codings":[{"system":"urn:oid:2.16.840.1.113883.6.73‎","code":"J01FA09"}],"text":"KLACID 250 mg Filmtabl"},"dosageInstructions":[]},{"id":"f89bf3a9bc37460a40113","identifier":["f89bf3a9bc37460a40113"],"dateWritten":1469613081000,"dateEnded":1469613081000,"medicationCodeableConcept":{"codings":[{"system":"urn:oid:2.16.840.1.113883.6.73‎","code":"B03AC"}],"text":"FERINJECT 1000 mg/20ml 20 ml Inj lös"},"dosageInstructions":[]},{"id":"La2f5e3814c63d0b40148","identifier":["La2f5e3814c63d0b40148"],"dateWritten":1469613186000,"note":"Vor dem Essen","medicationCodeableConcept":{"codings":[{"system":"urn:oid:2.16.840.1.113883.6.73‎","code":"J01FA09"}],"text":"KLACID 250 mg Filmtabl"},"dosageInstructions":[{"text":"1-0-1-0"}]},{"id":"Mcb7daad132dc64d70144","identifier":["Mcb7daad132dc64d70144"],"dateWritten":1469613165000,"medicationCodeableConcept":{"codings":[{"system":"urn:oid:1.3.160‎","code":"7680454950354"},{"system":"urn:oid:2.16.840.1.113883.6.73‎","code":"A10AC01"}],"text":"INSULIN Insulatard HM Amp 10 ml"},"dosageInstructions":[]},{"id":"md3bd3598895ed385025","identifier":["md3bd3598895ed385025"],"dateWritten":1469695248000,"dateEnded":1469695248000,"medicationCodeableConcept":{"codings":[{"system":"urn:oid:2.16.840.1.113883.6.73‎","code":"M01AB05"}],"text":"DICLOFENAC actavis 25 mg Filmtabl"},"dosageInstructions":[]},{"id":"n947d2e9aaf00442f0124","identifier":["n947d2e9aaf00442f0124"],"dateWritten":1469613096000,"dateEnded":1469613096000,"medicationCodeableConcept":{"codings":[{"system":"urn:oid:2.16.840.1.113883.6.73‎","code":"A10BX07"}],"text":"VICTOZA 6 mg/ml 2 3 ml Inj lös"},"dosageInstructions":[]},{"id":"t73274361106502a60204","identifier":["t73274361106502a60204"],"dateWritten":1469613426000,"dateEnded":1469613426000,"medicationCodeableConcept":{"codings":[{"system":"urn:oid:2.16.840.1.113883.6.73‎","code":"A10BX07"}],"text":"VICTOZA 6 mg/ml 2 3 ml Inj lös"},"dosageInstructions":[{"text":"2-0-1-0"}]},{"id":"Tc7f8cc7ac27557980136","identifier":["Tc7f8cc7ac27557980136"],"dateWritten":1469613156000,"dateEnded":1469613156000,"medicationCodeableConcept":{"codings":[{"system":"urn:oid:1.3.160‎","code":"7680454950354"},{"system":"urn:oid:2.16.840.1.113883.6.73‎","code":"A10AC01"}],"text":"INSULIN Insulatard HM Amp 10 ml"},"dosageInstructions":[]},{"id":"u7a568eaa3253e64c0156","identifier":["u7a568eaa3253e64c0156"],"dateWritten":1469613201000,"dateEnded":1469613201000,"medicationCodeableConcept":{"codings":[{"system":"urn:oid:2.16.840.1.113883.6.73‎","code":"B03AC"}],"text":"FERINJECT 1000 mg/20ml 20 ml Inj lös"},"dosageInstructions":[{"text":"1-1-1-0.5"}]}];
        var test =  [{"showFreetext":false,"hasBeenStopped":true,"id":"d6386c052dec4b1686ebe689","status":"completed","isHistory":true,"notes":"Teste","dateWritten":1480609116000,"dateEnded":1478017847000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"1-1-2-2","posology":{"morning":1,"midday":1,"evening":2,"night":2},"hasPosology":true,"endDate":1478017847000},{"showFreetext":false,"hasBeenStopped":true,"id":"07223e981b8140f8a4005f07","status":"completed","isHistory":true,"dateWritten":1480609116000,"dateEnded":1478018181000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"10-0-0-0","posology":{"morning":10,"midday":0,"evening":0,"night":0},"hasPosology":true,"endDate":1478018181000},{"showFreetext":false,"hasBeenStopped":true,"id":"f1ae164f3bbc47eaaf7c145b","status":"completed","isHistory":true,"notes":"Teste","dateWritten":1480609007000,"dateEnded":1478017723000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"1-1-2-2","posology":{"morning":1,"midday":1,"evening":2,"night":2},"hasPosology":true,"endDate":1478017723000},{"showFreetext":true,"hasBeenStopped":true,"id":"4a35ec1d4fbc401ba51e0a40","status":"completed","isHistory":true,"dateWritten":1480609007000,"dateEnded":1478017675000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","hasPosology":false,"endDate":1478017675000},{"showFreetext":false,"hasBeenStopped":true,"id":"f054ae742e4b4a2e86ee0790","status":"completed","isHistory":true,"notes":"Einnahme","dateWritten":1478732400000,"dateEnded":1478168023000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"5-4-3-2","additionalInstructions":"Zusatz","posology":{"morning":5,"midday":4,"evening":3,"night":2},"hasPosology":true,"endDate":1478168023000},{"showFreetext":false,"hasBeenStopped":false,"id":"88a92d6fbe2840e6804256ad","status":"active","dateWritten":1478169695000,"article":"DUL-X Gel Neck Relax 50 ml","instructions":"6-0-0-1","posology":{"morning":6,"midday":0,"evening":0,"night":1},"hasPosology":true,"endDate":1478171225072},{"showFreetext":false,"hasBeenStopped":true,"id":"efd9a57660364b8ca7826708","status":"completed","isHistory":true,"notes":"Test","dateWritten":1478169455000,"dateEnded":1478169695000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"5-0-0-1","additionalInstructions":"Hallo","posology":{"morning":5,"midday":0,"evening":0,"night":1},"hasPosology":true,"endDate":1478169695000},{"showFreetext":false,"hasBeenStopped":true,"id":"b0349824964f48f1a231deb5","status":"completed","isHistory":true,"notes":"SDfwe","dateWritten":1478168023000,"dateEnded":1478169668000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"7-0-0-0","additionalInstructions":"Sdfwef","posology":{"morning":7,"midday":0,"evening":0,"night":0},"hasPosology":true,"endDate":1478169668000},{"showFreetext":false,"hasBeenStopped":true,"id":"fdfa46992fc040f59640f30b","status":"completed","isHistory":true,"notes":"Neu","dateWritten":1478166035000,"dateEnded":1478169455000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"6-5-4-3","additionalInstructions":"Neu","posology":{"morning":6,"midday":5,"evening":4,"night":3},"hasPosology":true,"endDate":1478169455000},{"showFreetext":false,"hasBeenStopped":true,"id":"8c86ef5426394716bac6ceaf","status":"completed","isHistory":true,"dateWritten":1478165567000,"dateEnded":1478166035000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"12-2-1-0","posology":{"morning":12,"midday":2,"evening":1,"night":0},"hasPosology":true,"endDate":1478166035000},{"showFreetext":false,"hasBeenStopped":true,"id":"75926908b5bb435294f91ab1","status":"completed","isHistory":true,"notes":"TestiTest","dateWritten":1478157785000,"dateEnded":1478165567000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"4-2-1-0","additionalInstructions":"Zusatz","posology":{"morning":4,"midday":2,"evening":1,"night":0},"hasPosology":true,"endDate":1478165567000},{"showFreetext":false,"hasBeenStopped":true,"id":"005dae0bbb05416cbcb132e4","status":"completed","isHistory":true,"dateWritten":1478157555000,"dateEnded":1478165479000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"3-0-1-0","posology":{"morning":3,"midday":0,"evening":1,"night":0},"hasPosology":true,"endDate":1478165479000},{"showFreetext":false,"hasBeenStopped":true,"id":"7cb62fcc4e7a4bd6bcbc16cd","status":"completed","isHistory":true,"notes":"Test","dateWritten":1478107636000,"dateEnded":1478157785000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"3-0-1-0","additionalInstructions":"Test2","posology":{"morning":3,"midday":0,"evening":1,"night":0},"hasPosology":true,"endDate":1478157785000},{"showFreetext":false,"hasBeenStopped":false,"id":"67edbda210e74de595c7e07b","status":"active","dateWritten":1478107636000,"article":"DUL-X Gel Neck Relax 50 ml","instructions":"3-0-1-0","posology":{"morning":3,"midday":0,"evening":1,"night":0},"hasPosology":true,"endDate":1478171225072},{"showFreetext":false,"hasBeenStopped":true,"id":"57b2133597ec42dda3670495","status":"completed","isHistory":true,"dateWritten":1478107636000,"dateEnded":1478156783000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"3-0-1-0","posology":{"morning":3,"midday":0,"evening":1,"night":0},"hasPosology":true,"endDate":1478156783000},{"showFreetext":false,"hasBeenStopped":true,"id":"9054a137dd8649a8971b0eb6","status":"completed","isHistory":true,"dateWritten":1478018181000,"dateEnded":1478107636000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"11-1-1-0","posology":{"morning":11,"midday":1,"evening":1,"night":0},"hasPosology":true,"endDate":1478107636000},{"showFreetext":false,"hasBeenStopped":false,"id":"7002089b2fd847f589bf7a6a","status":"active","notes":"Aufsprühen","dateWritten":1478017007000,"article":"DUL-X Gel Neck Relax 50 ml","instructions":"2-2-2-2","posology":{"morning":2,"midday":2,"evening":2,"night":2},"hasPosology":true,"endDate":1478171225072},{"showFreetext":false,"hasBeenStopped":true,"id":"e9b552e6d2074045b563162c","status":"completed","isHistory":true,"notes":"Aufsprühen","dateWritten":1478008167000,"dateEnded":1478017486000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"2-2-3-3","posology":{"morning":2,"midday":2,"evening":3,"night":3},"hasPosology":true,"endDate":1478017486000},{"showFreetext":false,"hasBeenStopped":true,"id":"2638ed4ead794180aa99cdd9","status":"completed","isHistory":true,"notes":"Aufsprühen","dateWritten":1478008167000,"dateEnded":1478017116000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"2-2-2-2","posology":{"morning":2,"midday":2,"evening":2,"night":2},"hasPosology":true,"endDate":1478017116000},{"showFreetext":false,"hasBeenStopped":true,"id":"31949cb0e06145b0bd754658","status":"completed","isHistory":true,"notes":"Aufsprühen","dateWritten":1478008167000,"dateEnded":1478017007000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"2-2-2-2","posology":{"morning":2,"midday":2,"evening":2,"night":2},"hasPosology":true,"endDate":1478017007000},{"showFreetext":false,"hasBeenStopped":true,"id":"Z3e44262f37d24b66039","status":"completed","isHistory":true,"notes":"Aufsprühen","dateWritten":1478008167000,"dateEnded":1478016851000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","instructions":"1-0-1-0","posology":{"morning":1,"midday":0,"evening":1,"night":0},"hasPosology":true,"endDate":1478016851000},{"showFreetext":true,"hasBeenStopped":true,"id":"94e3b20d3f2144f386694462","status":"completed","isHistory":true,"dateWritten":1478008167000,"dateEnded":1478017572000,"reasonEnded":"Geändert durch FHIR Server","article":"DUL-X Gel Neck Relax 50 ml","hasPosology":false,"endDate":1478017572000},{"showFreetext":true,"hasBeenStopped":true,"id":"W438c10017326e63a029","status":"completed","isHistory":true,"notes":"Aufsprühen","dateWritten":1478008089000,"dateEnded":1478008167000,"reasonEnded":"Geändert durch Wiget Philipp","article":"DUL-X Gel Neck Relax 50 ml","hasPosology":false,"endDate":1478008167000},{"showFreetext":true,"hasBeenStopped":false,"id":"q4984820a3a28435a050","status":"active","dateWritten":1478007535000,"article":"ALGES-X forte 400 mg Filmtabl","hasPosology":false,"endDate":1478171225072},{"showFreetext":false,"hasBeenStopped":true,"id":"R16b2cd942040a86e033","status":"completed","isHistory":true,"dateWritten":1469959915000,"dateEnded":1478007800000,"reasonEnded":"Geändert durch FHIR Server","article":"MEFENACID 250 mg Kaps","instructions":"1-1-1-0","posology":{"morning":1,"midday":1,"evening":1,"night":0},"hasPosology":true,"endDate":1478007800000},{"showFreetext":true,"hasBeenStopped":true,"id":"Ad6cc17eebdfaa321027","status":"completed","isHistory":true,"dateWritten":1469959901000,"dateEnded":1469959915000,"reasonEnded":"Geändert durch Wiget Philipp","article":"MEFENACID 250 mg Kaps","hasPosology":false,"endDate":1469959915000}];

        var result = converter.toView([item1,item2,item3,item4,item5],"fake");
        expect(result.length).toBe(1);
        expect(result[0]).toBe(item2);

        var result = converter.toView([item1,item2,item3,item4,item5],"Drosselweg");
        expect(result.length).toBe(1);
        expect(result[0]).toBe(item4);

        var result = converter.toView([item1,item2,item3,item4,item5],"cat");
        expect(result.length).toBe(1);
        expect(result[0]).toBe(item5);

        var result = converter.toView(items,"Victoza");
        expect(result.length).toBe(3);

        var result = converter.toView(test, "CCCC");
        converter.toView(test, "D");
        converter.toView(test, "DU");
        converter.toView(test, "DUL");

        expect(result.length).toBe(0);
    });


});